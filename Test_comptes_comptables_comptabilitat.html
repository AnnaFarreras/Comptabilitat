<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test de Comptes comptables de comptabilitat</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade { transition: all 0.3s ease-in-out; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex items-center justify-center p-4">
  <div id="app" class="max-w-xl w-full bg-white shadow-xl rounded-2xl p-6">
    <h1 class="text-2xl font-bold mb-4 text-center">Test de Comptes comptables de comptabilitat</h1>
    <div class="w-full bg-gray-300 h-2 rounded overflow-hidden mb-4">
      <div id="progress-fill" class="h-full bg-blue-500" style="width: 0%;"></div>
    </div>
    <div id="quiz-container"></div>
    <div class="flex justify-between items-center mt-6">
      <div id="score" class="text-sm text-gray-600">Encerts: 0 / 0</div>
      <button id="next-btn" class="hidden bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Seg眉ent</button>
    </div>
  </div>

  <script>
    const preguntes = [
{
  pregunta: 'Quina 茅s la descripci贸 del compte (4750)?',
  opcions: ['Creditors, efectes comercials a pagar', "Variaci贸 d'exist猫ncies de primeres mat猫ries", 'Efectes comercials descomptats', 'Hisenda p煤blica, creditora per IVA'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Un altre immobilitzat material'?",
  opcions: ['(258)', '(627)', '(219)', '(206)'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (431)?',
  opcions: ['Altres ingressos financers', 'Clients, efectes comercials a cobrar', 'Efectes comercials impagats', 'Transport'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Altres ingressos financers'?",
  opcions: ['(769)', '(6060)', '(625)', '(300)'],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Hisenda P煤blica, deutora per IVA'?",
  opcions: ['(5208)', '(600)', '(472)', '(4700)'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Elements de transport'?",
  opcions: ['(100)', '(626)', '(218)', '(4311)'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (460)?',
  opcions: ['Reserva legal', 'Deutes per efectes descomptats', 'Hisenda P煤blica, IVA repercutit', 'Bestretes de remuneracions'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (4752)?',
  opcions: ['Reserva legal', "Primes d'assegurances", 'Amortitzaci贸 acumulada de mobiliari', 'Hisenda p煤blica, creditora per impost sobre societats'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Subministraments'?",
  opcions: ['(212)', '(7090)', '(572)', '(628)'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (708)?',
  opcions: ['Instal路lacions t猫cniques', "Vendes d'envasos i embalatges", 'Efectes comercials descomptats', 'Devolucions de vendes i operacions similars'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (173)?',
  opcions: ["Prove茂dors d'immobilitzat a llarg termini", 'Altres ingressos financers', "Variaci贸 d'exist猫ncies de mercaderies", 'Deutors, efectes comercials en gesti贸 de cobrament'],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Resultat de l'exercici'?",
  opcions: ['(680)', '(129)', '(217)', '(622)'],
  correcta: 1
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (6653)?',
  opcions: ['Maquinria', 'Elements de transport', 'Devolucions de vendes i operacions similars', "Interessos per descompte d'efectes a altres entitats de cr猫dit"],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (440)?',
  opcions: ['Arrendaments i cnons', 'Efectes comercials en cartera', 'Reparacions i conservaci贸', 'Deutors'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Deutes a llarg termini amb entitats de cr猫dit'?",
  opcions: ['(625)', '(170)', '(659)', '(401)'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Descomptes sobre vendes per pagament immediat de mercaderies'?",
  opcions: ['(7060)', '(769)', '(460)', '(669)'],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Prove茂dors d'immobilitzat a curt termini'?",
  opcions: ['(465)', '(523)', '(476)', '(2819)'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Construccions'?",
  opcions: ['(6623)', '(555)', '(6090)', '(211)'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (631)?',
  opcions: ['Clients de dubt贸s cobrament', 'Amortitzaci贸 acumulada de maquinria', 'Despeses excepcionals', 'Altres tributs'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Reparacions i conservaci贸'?",
  opcions: ['(680)', '(622)', '(218)', '(472)'],
  correcta: 1
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (2812)?',
  opcions: ['Clients', 'Imposicions a llarg termini', "Amortitzaci贸 acumulada d'instal路lacions t猫cniques", "Amortitzaci贸 de l'immobilitzat intangible"],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Devolucions de vendes de mercaderies'?",
  opcions: ['(7080)', '(680)', '(708)', '(173)'],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Efectes a pagar a llarg termini'?",
  opcions: ['(175)', '(300)', '(704)', '(216)'],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Capital social'?",
  opcions: ['(100)', '(400)', '(129)', '(4412)'],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (214)?',
  opcions: ['Utillatge', 'Altres ingressos financers', 'Altres tributs', "Pr茅stecs a curt termini d'entitats de cr猫dit"],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (465)?',
  opcions: ['Bestretes de clients', 'Hisenda p煤blica, creditora per impost sobre societats', 'Remuneracions pendents de pagament', 'Amortitzaci贸 acumulada de maquinria'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Despeses excepcionals'?",
  opcions: ['(678)', '(681)', '(625)', '(555)'],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (2819)?',
  opcions: ['Devolucions de vendes i operacions similars', 'Mobles', 'Hisenda P煤blica, IVA suportat', "Amortitzaci贸 acumulada d'un altre immobilitzat material"],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (216)?',
  opcions: ["Variaci贸 d'exist猫ncies de mercaderies", 'Mobles', "Amortitzaci贸 acumulada d'un altre immobilitzat material", 'Clients, efectes comercials a cobrar'],
  correcta: 1
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (436)?',
  opcions: ['Deutors, efectes comercials a cobrar', 'Clients de dubt贸s cobrament', 'Descomptes sobre compres per pagament immediat de mercaderies', 'Bestretes de clients'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Variaci贸 d'exist猫ncies de primeres mat猫ries'?",
  opcions: ['(129)', '(623)', '(2816)', '(611)'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (472)?',
  opcions: ['Hisenda P煤blica, IVA repercutit', 'Efectes comercials en gesti贸 de cobrament', "Pr茅stecs a curt termini d'entitats de cr猫dit", 'Hisenda P煤blica, IVA suportat'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Mercaderies A'?",
  opcions: ['(627)', '(300)', '(441)', '(170)'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Vendes d'envasos i embalatges'?",
  opcions: ['(4312)', '(411)', '(572)', '(704)'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (258)?',
  opcions: ['Devolucions de vendes i operacions similars', 'Imposicions a llarg termini', "Amortitzaci贸 de l'immobilitzat material", 'Devolucions de vendes de mercaderies'],
  correcta: 1
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (4315)?',
  opcions: ['Prove茂dors, efectes comercials a pagar', 'Efectes comercials descomptats', 'Sous i salaris', 'Efectes comercials impagats'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (206)?',
  opcions: ['Descomptes sobre compres per pagament immediat de mercaderies', 'Mercaderies A', 'Aplicacions informtiques', 'Hisenda P煤blica, IVA repercutit'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Reserva legal'?",
  opcions: ['(4412)', '(217)', '(112)', '(640)'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Maquinria'?",
  opcions: ['(217)', '(630)', '(4412)', '(213)'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (2816)?',
  opcions: ["Amortitzaci贸 acumulada d'instal路lacions t猫cniques", 'Amortitzaci贸 acumulada de mobiliari', 'Elements de transport', 'Arrendaments i cnons'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'P猫rdues de cr猫dits comercials incobrables'?",
  opcions: ['(4410)', '(170)', '(6623)', '(650)'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (411)?',
  opcions: ['Creditors, efectes comercials a pagar', 'Clients, efectes comercials a cobrar', 'Interessos de deutes amb entitats de cr猫dit', 'Efectes comercials descomptats'],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (281)?',
  opcions: ['Bestretes de clients', "Interessos per descompte d'efectes a altres entitats de cr猫dit", "Amortitzaci贸 acumulada de l'immobilitzat material", "Prove茂dors d'immobilitzat a curt termini"],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Deutors, efectes comercials en gesti贸 de cobrament'?",
  opcions: ['(411)', '(281)', '(4412)', '(708)'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (477)?',
  opcions: ['Maquinria', 'Devolucions de vendes i operacions similars', 'Hisenda P煤blica, IVA repercutit', "Prove茂dors d'immobilitzat a curt termini"],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (4311)?',
  opcions: ['Efectes comercials descomptats', 'Bestretes de clients', 'Hisenda p煤blica, creditora per retencions practicades', 'Prove茂dors'],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Clients'?",
  opcions: ['(219)', '(623)', '(430)', '(669)'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (671)?',
  opcions: ['Devolucions de vendes de mercaderies', 'Deutors, efectes comercials a cobrar', 'Hisenda p煤blica, creditora per impost sobre societats', "P猫rdues procedents de l'immobilitzat material"],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (680)?',
  opcions: ["Amortitzaci贸 de l'immobilitzat intangible", 'Serveis bancaris i similars', 'Transport', "Amortitzaci贸 acumulada d'elements de transport"],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (600)?',
  opcions: ['Hisenda p煤blica, creditora per IVA', 'Aplicacions informtiques', 'Devolucions de vendes i operacions similars', 'Compres de mercaderies'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (2811)?',
  opcions: ['Devolucions de compres de mercaderies', 'Clients, efectes comercials a cobrar', 'Amortitzaci贸 acumulada de construccions', "Resultat de l'exercici"],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Altres despeses financeres'?",
  opcions: ['(206)', '(2818)', '(669)', '(4311)'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (4410)?',
  opcions: ['Deutors, efectes comercials en cartera', 'Deutors, efectes comercials en gesti贸 de cobrament', 'Altres despeses financeres', "Prove茂dors d'immobilitzat a curt termini"],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Deutors (euros)'?",
  opcions: ['(525)', '(438)', '(4400)', '(206)'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Bancs i institucions de cr猫dit c/c vista, euros'?",
  opcions: ['(214)', '(572)', '(630)', '(436)'],
  correcta: 1
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (5201)?',
  opcions: ['Bestretes de clients', 'Altres tributs', 'Elements de transport', 'Deutes a curt termini per cr猫dit disposat'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Prove茂dors'?",
  opcions: ['(2811)', '(400)', '(6623)', '(218)'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Hisenda p煤blica, creditora per retencions practicades'?",
  opcions: ['(4750)', '(625)', '(411)', '(4751)'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Instal路lacions t猫cniques'?",
  opcions: ['(212)', '(4752)', '(437)', '(4750)'],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (627)?',
  opcions: ['Rpels per compres de mercaderies', 'Utillatge', 'Reserva legal', 'Publicitat, propaganda i relacions p煤bliques'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (6060)?',
  opcions: ['Vendes de mercaderies', 'Subministraments', 'Descomptes sobre compres per pagament immediat de mercaderies', 'Mercaderies A'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Envasos i embalatges a tornar per clients'?",
  opcions: ['(2812)', '(700)', '(437)', '(631)'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (171)?',
  opcions: ['Elements de transport', 'Rpels per compres de mercaderies', 'Deutes a llarg termini', 'Caixa, euros'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Serveis bancaris i similars'?",
  opcions: ['(629)', '(642)', '(708)', '(626)'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (681)?',
  opcions: ['Maquinria', "Amortitzaci贸 de l'immobilitzat material", 'Vendes de mercaderies', 'Altres serveis'],
  correcta: 1
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (640)?',
  opcions: ['Remuneracions pendents de pagament', 'Creditors per prestacions de serveis', 'Sous i salaris', 'Deutes a llarg termini amb entitats de cr猫dit'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (700)?',
  opcions: ['Vendes de mercaderies', "Seguretat Social a crrec de l'empresa", 'Hisenda p煤blica, creditora per IVA', 'Descomptes sobre vendes per pagament immediat de mercaderies'],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (4312)?',
  opcions: ['Imposicions a llarg termini', 'Efectes comercials en gesti贸 de cobrament', 'Vendes de mercaderies', 'Impost sobre beneficis'],
  correcta: 1
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (7090)?',
  opcions: ['Interessos de deutes amb entitats de cr猫dit', 'Bestretes de remuneracions', 'Impost sobre beneficis', 'Rpels sobre vendes de mercaderies'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Amortitzaci贸 acumulada de maquinria'?",
  opcions: ['(2818)', '(2813)', '(258)', '(628)'],
  correcta: 1
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (441)?',
  opcions: ['Sous i salaris', 'Deutors, efectes comercials a cobrar', 'Bestretes de remuneracions', 'Instal路lacions t猫cniques'],
  correcta: 1
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (610)?',
  opcions: ['Efectes a pagar a llarg termini', 'Rpels sobre vendes de mercaderies', "Amortitzaci贸 acumulada d'instal路lacions t猫cniques", "Variaci贸 d'exist猫ncies de mercaderies"],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Caixa, euros'?",
  opcions: ['(310)', '(441)', '(570)', '(4700)'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Mat猫ries primeres A'?",
  opcions: ['(630)', '(700)', '(310)', '(472)'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (438)?',
  opcions: ['Bestretes de clients', "Variaci贸 d'exist猫ncies de primeres mat猫ries", 'Sous i salaris', "Vendes d'envasos i embalatges"],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (5200)?',
  opcions: ['Sous i salaris', "Pr茅stecs a curt termini d'entitats de cr猫dit", 'Clients', 'Devolucions de vendes de mercaderies'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Organismes de la Seguretat Social, creditors'?",
  opcions: ['(173)', '(437)', '(476)', '(611)'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (2817)?',
  opcions: ["Amortitzaci贸 acumulada d'equips per a processos d'informaci贸", 'P猫rdues de cr猫dits comercials incobrables', 'Efectes comercials en cartera', "Amortitzaci贸 acumulada d'instal路lacions t猫cniques"],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Primes d'assegurances'?",
  opcions: ['(625)', '(6653)', '(441)', '(4310)'],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (642)?',
  opcions: ['Devolucions de compres de mercaderies', 'Capital social', "Variaci贸 d'exist猫ncies de mercaderies", "Seguretat Social a crrec de l'empresa"],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (659)?',
  opcions: ['Hisenda p煤blica, creditora per impost sobre societats', 'Hisenda p煤blica, creditora per IVA', 'Mercaderies A', 'Altres p猫rdues en gesti贸 corrent'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (551)?',
  opcions: ['Descomptes sobre vendes per pagament immediat de mercaderies', 'Remuneracions pendents de pagament', "Primes d'assegurances", 'Compte corrent amb socis i administradors'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (555)?',
  opcions: ["Amortitzaci贸 acumulada d'elements de transport", "P猫rdues procedents de l'immobilitzat material", 'Deutors, efectes comercials en gesti贸 de cobrament', "Partides pendents d'aplicaci贸"],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (525)?',
  opcions: ['Deutors, efectes comercials en cartera', 'Efectes comercials impagats', 'Clients, efectes comercials a cobrar', 'Efectes a pagar a curt termini'],
  correcta: 3
},
{
  pregunta: "A quin codi correspon: 'Serveis de professionals independents'?",
  opcions: ['(212)', '(680)', '(623)', '(551)'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (401)?',
  opcions: ['Efectes comercials descomptats', 'Prove茂dors, efectes comercials a pagar', 'Devolucions de compres de mercaderies', 'Mat猫ries primeres A'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Altres serveis'?",
  opcions: ['(629)', '(611)', '(216)', '(650)'],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Creditors per prestacions de serveis'?",
  opcions: ['(410)', '(630)', '(6090)', '(4311)'],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (621)?',
  opcions: ['Publicitat, propaganda i relacions p煤bliques', 'Serveis de professionals independents', 'Arrendaments i cnons', 'Hisenda p煤blica, creditora per retencions practicades'],
  correcta: 2
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (630)?',
  opcions: ['Impost sobre beneficis', "Seguretat Social a crrec de l'empresa", 'Caixa, euros', "Variaci贸 d'exist猫ncies de mercaderies"],
  correcta: 0
},
{
  pregunta: "A quin codi correspon: 'Amortitzaci贸 acumulada d'elements de transport'?",
  opcions: ['(2818)', '(430)', '(4750)', '(572)'],
  correcta: 0
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (5208)?',
  opcions: ["Pr茅stecs a curt termini d'entitats de cr猫dit", 'Deutes per efectes descomptats', "Equips per a processos d'informaci贸", 'Vendes de mercaderies'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Efectes comercials en cartera'?",
  opcions: ['(477)', '(4410)', '(4310)', '(4315)'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Equips per a processos d'informaci贸'?",
  opcions: ['(621)', '(460)', '(217)', '(572)'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Devolucions de compres de mercaderies'?",
  opcions: ['(570)', '(4752)', '(441)', '(6080)'],
  correcta: 3
},
{
  pregunta: 'Quina 茅s la descripci贸 del compte (6623)?',
  opcions: ['Bestretes de clients', "Amortitzaci贸 acumulada d'un altre immobilitzat material", 'Interessos de deutes amb entitats de cr猫dit', 'Construccions'],
  correcta: 2
},
{
  pregunta: "A quin codi correspon: 'Transport'?",
  opcions: ['(6623)', '(624)', '(211)', '(680)'],
  correcta: 1
},
{
  pregunta: "A quin codi correspon: 'Rpels per compres de mercaderies'?",
  opcions: ['(769)', '(437)', '(629)', '(6090)'],
  correcta: 3
}
];

let preguntesPendents = [...preguntes];
    let encerts = 0;
    let total = 0;
    const progressFill = document.getElementById("progress-fill");

    function updateProgress() {
      const totalPreguntes = encerts + preguntesPendents.length;
      const percentatge = totalPreguntes > 0 ? (encerts / totalPreguntes) * 100 : 0;
      if (progressFill) progressFill.style.width = `${percentatge}%`;
    }

    const quizContainer = document.getElementById("quiz-container");
    const nextBtn = document.getElementById("next-btn");
    const score = document.getElementById("score");

    function barrejaArray(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function mostraPregunta() {
      updateProgress();
      quizContainer.innerHTML = "";
      nextBtn.classList.add("hidden");

      if (preguntesPendents.length === 0) {
        quizContainer.innerHTML = `
          <div class="text-center">
            <p class="text-xl font-semibold mb-4"> Has completat el test!</p>
            <p class="mb-4">Has encertat ${encerts} de ${total} preguntes.</p>
            <button onclick="reinicia()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Reiniciar</button>
            <button onclick="window.close()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 ml-2">Sortir</button>
          </div>
        `;
        return;
      }

      preguntesPendents = barrejaArray(preguntesPendents);
      actual = preguntesPendents.shift();
      const respostaCorrecta = actual.opcions[actual.correcta];
      actual.opcions = barrejaArray([...actual.opcions]);
      actual.correcta = actual.opcions.indexOf(respostaCorrecta);

      const opcionsHTML = actual.opcions.map((text, i) => `
        <button onclick="validaResposta(${i})" class="w-full text-left px-4 py-2 mb-2 border rounded bg-gray-100 hover:bg-gray-200 opc">${text}</button>
      `).join("");

      quizContainer.innerHTML = `
        <p class="mb-4 font-medium">${actual.pregunta}</p>
        <div id="opcions">${opcionsHTML}</div>
        <div id="feedback" class="mt-4 text-center"></div>
      `;
    }

    function validaResposta(index) {
      const botons = document.querySelectorAll(".opc");
      botons.forEach(btn => btn.disabled = true);
      total++;
      if (index === actual.correcta) {
        botons[index].classList.add("bg-green-300");
        document.getElementById("feedback").innerHTML = "<p class='text-green-600 font-bold'> Molt b茅, has encertat la pregunta!</p>";
        encerts++;
      } else {
        botons[index].classList.add("bg-red-300");
        botons[actual.correcta].classList.add("bg-green-300");
        document.getElementById("feedback").innerHTML = "<p class='text-red-600 font-bold'> Ohhh! No 茅s correcte!</p>";
        preguntesPendents.push(actual);
      }
      nextBtn.classList.remove("hidden");
      score.textContent = `Encerts: ${encerts} / ${total}`;
      updateProgress();
    }

    function reinicia() {
      preguntesPendents = [...preguntes];
      encerts = 0;
      total = 0;
      score.textContent = `Encerts: 0 / 0`;
      mostraPregunta();
    }

    nextBtn.addEventListener("click", mostraPregunta);
    mostraPregunta();
  </script>
  <script>
  // Si aquest fitxer s'est carregant dins un iframe...
  if (window !== window.parent) {
    window.addEventListener('load', () => {
      const height = document.documentElement.scrollHeight;
      // Enviem un missatge al parent (landing page)
      parent.postMessage({ type: 'resize-iframe', height }, '*');
    });
  }
</script>

</body>
</html>
